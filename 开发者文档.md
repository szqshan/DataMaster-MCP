# ğŸ› ï¸ DataMaster MCP å¼€å‘è€…æ–‡æ¡£

> **å¼€å‘è€…å’ŒAIä½¿ç”¨çš„æŠ€æœ¯æ–‡æ¡£** - å·¥å…·è®¾è®¡ã€ä¿®å¤è®°å½•å’ŒAIä½¿ç”¨æŒ‡å—

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
2. [å·¥å…·è®¾è®¡ç†å¿µ](#å·¥å…·è®¾è®¡ç†å¿µ)
3. [AIå·¥å…·ä½¿ç”¨æŒ‡å—](#aiå·¥å…·ä½¿ç”¨æŒ‡å—)
4. [ä¿®å¤è®°å½•](#ä¿®å¤è®°å½•)
5. [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)
6. [æµ‹è¯•éªŒè¯](#æµ‹è¯•éªŒè¯)

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ ¸å¿ƒæ¨¡å—

```
DataMaster_MCP/
â”œâ”€â”€ main.py                    # MCPæœåŠ¡å™¨ä¸»å…¥å£
â”œâ”€â”€ config/                    # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ config_manager.py     # é…ç½®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ database_manager.py   # æ•°æ®åº“ç®¡ç†å™¨
â”‚   â”œâ”€â”€ api_connector.py      # APIè¿æ¥å™¨
â”‚   â”œâ”€â”€ api_data_storage.py   # APIæ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ data_transformer.py   # æ•°æ®è½¬æ¢å™¨
â”œâ”€â”€ requirements.txt           # ä¾èµ–åŒ…
â””â”€â”€ docs/                     # æ–‡æ¡£ç›®å½•
```

### è®¾è®¡åŸåˆ™

1. **æ¨¡å—åŒ–è®¾è®¡** - æ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹æ¨¡å—
2. **é…ç½®é©±åŠ¨** - é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†è¿æ¥
3. **é”™è¯¯å®¹é”™** - å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
4. **AIå‹å¥½** - è¯¦ç»†çš„å·¥å…·æè¿°å’Œå‚æ•°è¯´æ˜

---

## ğŸ’¡ å·¥å…·è®¾è®¡ç†å¿µ

### æ ¸å¿ƒç†å¿µ

**å·¥å…·ä¸“æ³¨æ•°æ®è·å–å’Œè®¡ç®—ï¼ŒAIä¸“æ³¨æ™ºèƒ½åˆ†æå’Œæ´å¯Ÿ**

### è®¾è®¡ç‰¹æ€§

#### 1. ä¸¤æ­¥è¿æ¥æ³•

**è®¾è®¡ç›®çš„**: åˆ†ç¦»è¿æ¥æµ‹è¯•å’Œå®é™…ä½¿ç”¨ï¼Œæé«˜ç¨³å®šæ€§

```python
# ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé…ç½®ï¼ˆæµ‹è¯•è¿æ¥ï¼‰
connect_data_source(
    source_type="mysql",
    config={"host": "localhost", "user": "root", ...}
)
# è¿”å›ï¼štemp_mysql_20250724_173102

# ç¬¬äºŒæ­¥ï¼šä½¿ç”¨é…ç½®ï¼ˆå®é™…è¿æ¥ï¼‰
connect_data_source(
    source_type="database_config",
    config={"database_name": "temp_mysql_20250724_173102"}
)
```

**ä¼˜åŠ¿**:
- è¿æ¥å‚æ•°éªŒè¯å’Œå®é™…ä½¿ç”¨åˆ†ç¦»
- ä¸´æ—¶é…ç½®è‡ªåŠ¨ç®¡ç†
- æ”¯æŒé…ç½®å¤ç”¨

#### 2. å‚æ•°å…¼å®¹æ€§

æ”¯æŒå¤šç§å‚æ•°åç§°å˜ä½“ï¼š
- `user` / `username`
- `password` / `passwd`
- `database` / `db`

#### 3. æŸ¥è¯¢å·¥å…·åˆ†å·¥

- `execute_sql`: æœ¬åœ°SQLiteå’ŒæŒ‡å®šæ•°æ®æº
- `query_external_database`: ä¸“é—¨æŸ¥è¯¢å¤–éƒ¨æ•°æ®åº“

---

## ğŸ¤– AIå·¥å…·ä½¿ç”¨æŒ‡å—

### å·¥å…·é€ŸæŸ¥è¡¨

| å·¥å…·åç§° | ä¸»è¦åŠŸèƒ½ | æ ¸å¿ƒå‚æ•° | ä½¿ç”¨åœºæ™¯ |
|---------|---------|---------|----------|
| `connect_data_source` | è¿æ¥æ•°æ®æº | source_type, config | æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶å¯¼å…¥ |
| `execute_sql` | æŸ¥è¯¢æœ¬åœ°æ•°æ® | query, params | SQLiteæŸ¥è¯¢ |
| `query_external_database` | æŸ¥è¯¢å¤–éƒ¨æ•°æ®åº“ | database_name, query | MySQL/PostgreSQL/MongoDB |
| `get_data_info` | è·å–æ•°æ®ä¿¡æ¯ | info_type, table_name | æ•°æ®æ¢ç´¢ |
| `analyze_data` | æ•°æ®åˆ†æ | analysis_type, table_name | ç»Ÿè®¡åˆ†æ |
| `process_data` | æ•°æ®å¤„ç† | operation_type, config | æ•°æ®æ¸…æ´—ã€è½¬æ¢ |
| `export_data` | æ•°æ®å¯¼å‡º | export_type, data_source | ç»“æœå¯¼å‡º |

### AIä½¿ç”¨æœ€ä½³å®è·µ

#### 1. æ•°æ®åº“è¿æ¥æµç¨‹

```python
# âœ… æ­£ç¡®çš„è¿æ¥æµç¨‹
# æ­¥éª¤1ï¼šåˆ›å»ºé…ç½®
result1 = connect_data_source(
    source_type="mysql",
    config={"host": "localhost", "user": "root", "password": "pass", "database": "test"}
)
# è·å–ä¸´æ—¶é…ç½®åï¼štemp_mysql_xxx

# æ­¥éª¤2ï¼šä½¿ç”¨é…ç½®è¿æ¥
result2 = connect_data_source(
    source_type="database_config",
    config={"database_name": "temp_mysql_xxx"}
)

# æ­¥éª¤3ï¼šæŸ¥è¯¢æ•°æ®
query_external_database(
    database_name="temp_mysql_xxx",
    query="SELECT * FROM users LIMIT 10"
)
```

#### 2. æ•°æ®åˆ†æå·¥ä½œæµ

```python
# å®Œæ•´çš„æ•°æ®åˆ†ææµç¨‹
# 1. å¯¼å…¥æ•°æ®
connect_data_source(
    source_type="excel",
    config={"file_path": "data.xlsx"},
    target_table="raw_data"
)

# 2. æ¢ç´¢æ•°æ®ç»“æ„
get_data_info(info_type="schema", table_name="raw_data")
get_data_info(info_type="stats", table_name="raw_data")

# 3. æ•°æ®è´¨é‡æ£€æŸ¥
analyze_data(analysis_type="missing_values", table_name="raw_data")
analyze_data(analysis_type="duplicates", table_name="raw_data")

# 4. æ•°æ®æ¸…æ´—
process_data(
    operation_type="clean",
    data_source="raw_data",
    config={"remove_duplicates": True},
    target_table="clean_data"
)

# 5. ç»Ÿè®¡åˆ†æ
analyze_data(analysis_type="basic_stats", table_name="clean_data")
analyze_data(analysis_type="correlation", table_name="clean_data")

# 6. å¯¼å‡ºç»“æœ
export_data(export_type="excel", data_source="clean_data")
```

#### 3. é”™è¯¯å¤„ç†æŒ‡å—

**å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ**:

1. **"ç¼ºå°‘å¿…éœ€çš„é…ç½®å­—æ®µ: username"**
   - è§£å†³ï¼šä½¿ç”¨ `user` æˆ– `username` å‚æ•°

2. **"æ•°æ®åº“é…ç½®ä¸å­˜åœ¨"**
   - è§£å†³ï¼šä½¿ç”¨ `list_data_sources()` æŸ¥çœ‹å¯ç”¨é…ç½®

3. **"è¿æ¥è¶…æ—¶"**
   - è§£å†³ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæ•°æ®åº“æœåŠ¡çŠ¶æ€

#### 4. å‚æ•°æ ¼å¼å‚è€ƒ

**æ•°æ®åº“è¿æ¥å‚æ•°**:
```json
{
  "host": "æ•°æ®åº“åœ°å€",
  "port": ç«¯å£å·(æ•°å­—),
  "user": "ç”¨æˆ·å",        // æˆ– "username"
  "database": "æ•°æ®åº“å",
  "password": "å¯†ç "
}
```

**åˆ†æç±»å‹é€‰é¡¹**:
- `"basic_stats"` - åŸºç¡€ç»Ÿè®¡
- `"correlation"` - ç›¸å…³æ€§åˆ†æ
- `"outliers"` - å¼‚å¸¸å€¼æ£€æµ‹
- `"missing_values"` - ç¼ºå¤±å€¼åˆ†æ
- `"duplicates"` - é‡å¤å€¼æ£€æµ‹

**å¤„ç†æ“ä½œç±»å‹**:
- `"clean"` - æ•°æ®æ¸…æ´—
- `"transform"` - æ•°æ®è½¬æ¢
- `"filter"` - æ•°æ®ç­›é€‰
- `"aggregate"` - æ•°æ®èšåˆ
- `"merge"` - æ•°æ®åˆå¹¶
- `"reshape"` - æ•°æ®é‡å¡‘

---

## ğŸ”§ ä¿®å¤è®°å½•

### v1.0.0 é‡å¤§ä¿®å¤ (2025-01-24)

#### ä¿®å¤å†…å®¹

1. **âœ… æ•°æ®åº“è¿æ¥å‚æ•°å…¼å®¹æ€§ä¿®å¤**
   - **é—®é¢˜**: MySQLå’ŒPostgreSQLè¿æ¥æ—¶å‚æ•°åä¸åŒ¹é…
   - **ä¿®å¤**: ç»Ÿä¸€æ”¯æŒ `user` å’Œ `username` å‚æ•°
   - **æ–‡ä»¶**: `config/database_manager.py`

2. **âœ… ä¸´æ—¶é…ç½®ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¿®å¤**
   - **é—®é¢˜**: ä¸´æ—¶é…ç½®åˆ›å»ºåç«‹å³åˆ é™¤ï¼Œå¯¼è‡´åç»­æŸ¥è¯¢å¤±è´¥
   - **ä¿®å¤**: ä¸´æ—¶é…ç½®æŒä¹…åŒ–ä¿å­˜ï¼Œå¢åŠ ç®¡ç†åŠŸèƒ½
   - **æ–‡ä»¶**: `main.py`, `config/config_manager.py`

3. **âœ… MongoDBæŸ¥è¯¢è¯­æ³•è§£ææ”¹è¿›**
   - **é—®é¢˜**: èšåˆç®¡é“JSONè§£æå¤±è´¥
   - **ä¿®å¤**: æ”¯æŒå¤šç§æŸ¥è¯¢è¯­æ³•æ ¼å¼
   - **æ–‡ä»¶**: `config/database_manager.py`

4. **âœ… å·¥å…·åŠŸèƒ½å¢å¼º**
   - **æ–°å¢**: `list_temp` å’Œ `cleanup_temp` æ“ä½œ
   - **æ”¹è¿›**: é”™è¯¯ä¿¡æ¯å’Œæ“ä½œåé¦ˆ

#### æµ‹è¯•éªŒè¯

```bash
# è¿è¡Œä¿®å¤éªŒè¯æµ‹è¯•
python test_fixes.py

# æµ‹è¯•ç»“æœ
âœ… MySQLç”¨æˆ·åå…¼å®¹æ€§: é€šè¿‡
âœ… PostgreSQLç”¨æˆ·åå…¼å®¹æ€§: é€šè¿‡  
âœ… ä¸´æ—¶é…ç½®ç®¡ç†: é€šè¿‡
âœ… MongoDBç®¡é“è§£æ: é€šè¿‡

æ€»è®¡: 4/4 ä¸ªæµ‹è¯•é€šè¿‡
```

#### é‡è¦å‘ç°

**ç”¨æˆ·éªŒè¯æ¡ˆä¾‹ (2025-01-24)**:

ç»è¿‡å®é™…æµ‹è¯•éªŒè¯ï¼Œå‘ç°ä¹‹å‰çš„"è¿æ¥å¤±è´¥"é—®é¢˜å®é™…ä¸Šæ˜¯ä½¿ç”¨æ–¹æ³•ç†è§£åå·®ï¼š

âŒ **é”™è¯¯ç†è§£**:
- ä»¥ä¸ºå·¥å…·æœ‰bugï¼Œè¿æ¥æ€»æ˜¯å¤±è´¥
- ç›´æ¥ä½¿ç”¨ `source_type: "mysql"` ç­‰æ–¹å¼è¿æ¥
- æ²¡æœ‰æ„è¯†åˆ°åå°è‡ªåŠ¨åˆ›å»ºçš„ä¸´æ—¶é…ç½®

âœ… **æ­£ç¡®ç†è§£**:
- å·¥å…·å®Œå…¨æ­£å¸¸å·¥ä½œï¼
- ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºä¸´æ—¶é…ç½®ï¼ˆå¦‚ `temp_mysql_20250724_173102`ï¼‰
- å¿…é¡»ä½¿ç”¨ `source_type: "database_config"` + é…ç½®åç§°è¿æ¥
- ä½¿ç”¨ `query_external_database` æŸ¥è¯¢å¤–éƒ¨æ•°æ®åº“

**å…³é”®é¢†æ‚Ÿ**: é—®é¢˜ä¸åœ¨å·¥å…·ï¼Œè€Œåœ¨ä½¿ç”¨æ–¹æ³•ï¼ä¸¤æ­¥è¿æ¥æ³•æ˜¯è®¾è®¡ç‰¹æ€§ï¼Œä¸æ˜¯bugï¼

---

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ

1. **å‡½æ•°å‘½å**: ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•
2. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€è¿”å›JSONæ ¼å¼
3. **æ—¥å¿—è®°å½•**: å…³é”®æ“ä½œè®°å½•æ—¥å¿—
4. **å‚æ•°éªŒè¯**: ä¸¥æ ¼éªŒè¯è¾“å…¥å‚æ•°

### å·¥å…·å¼€å‘è§„èŒƒ

1. **Docstringè¦æ±‚**:
   - è¯¦ç»†çš„åŠŸèƒ½è¯´æ˜
   - å‚æ•°ç±»å‹å’Œè¯´æ˜
   - ä½¿ç”¨ç¤ºä¾‹
   - AIä½¿ç”¨å»ºè®®

2. **è¿”å›æ ¼å¼ç»Ÿä¸€**:
```json
{
  "status": "success|error|info",
  "message": "æ“ä½œæè¿°",
  "data": {},
  "metadata": {
    "timestamp": "2024-01-01T12:00:00"
  }
}
```

3. **é”™è¯¯å¤„ç†**:
   - æ•è·æ‰€æœ‰å¼‚å¸¸
   - æä¾›è¯¦ç»†é”™è¯¯ä¿¡æ¯
   - ç»™å‡ºè§£å†³å»ºè®®

### é…ç½®ç®¡ç†è§„èŒƒ

1. **æ•æ„Ÿä¿¡æ¯**: ä½¿ç”¨ç¯å¢ƒå˜é‡
2. **é…ç½®æ–‡ä»¶**: JSONæ ¼å¼ï¼Œæ”¯æŒæ³¨é‡Š
3. **é»˜è®¤å€¼**: æä¾›åˆç†çš„é»˜è®¤é…ç½®
4. **éªŒè¯æœºåˆ¶**: é…ç½®åŠ è½½æ—¶éªŒè¯

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•æ¡†æ¶

ä½¿ç”¨è‡ªå®šä¹‰æµ‹è¯•æ¡†æ¶ï¼ŒåŒ…å«ï¼š
- å•å…ƒæµ‹è¯•
- é›†æˆæµ‹è¯•
- åŠŸèƒ½éªŒè¯æµ‹è¯•

### æµ‹è¯•ç”¨ä¾‹

1. **æ•°æ®åº“è¿æ¥æµ‹è¯•**
   - å‚æ•°å…¼å®¹æ€§æµ‹è¯•
   - è¿æ¥è¶…æ—¶æµ‹è¯•
   - é”™è¯¯å¤„ç†æµ‹è¯•

2. **æ•°æ®å¤„ç†æµ‹è¯•**
   - æ–‡ä»¶å¯¼å…¥æµ‹è¯•
   - SQLæŸ¥è¯¢æµ‹è¯•
   - æ•°æ®åˆ†ææµ‹è¯•

3. **APIåŠŸèƒ½æµ‹è¯•**
   - APIè¿æ¥æµ‹è¯•
   - æ•°æ®è½¬æ¢æµ‹è¯•
   - å­˜å‚¨åŠŸèƒ½æµ‹è¯•

### æµ‹è¯•å‘½ä»¤

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/

# è¿è¡Œç‰¹å®šæµ‹è¯•
python test_fixes.py

# è¿è¡Œæ€§èƒ½æµ‹è¯•
python test_performance.py
```

---

## ğŸš€ æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡ (v1.1.0)

- [ ] æ•°æ®å¯è§†åŒ–åŠŸèƒ½
- [ ] æœºå™¨å­¦ä¹ é›†æˆ
- [ ] å®æ—¶æ•°æ®æµå¤„ç†
- [ ] Webç•Œé¢æ”¯æŒ

### é•¿æœŸç›®æ ‡ (v2.0.0)

- [ ] åˆ†å¸ƒå¼æ•°æ®å¤„ç†
- [ ] äº‘æœåŠ¡é›†æˆ
- [ ] é«˜çº§åˆ†æç®—æ³•
- [ ] ä¼ä¸šçº§å®‰å…¨åŠŸèƒ½

---

## ğŸ“ å¼€å‘æ”¯æŒ

### è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
4. æäº¤Pull Request

### é—®é¢˜åé¦ˆ

- **BugæŠ¥å‘Š**: æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¤ç°æ­¥éª¤
- **åŠŸèƒ½å»ºè®®**: æè¿°éœ€æ±‚å’Œä½¿ç”¨åœºæ™¯
- **æ–‡æ¡£æ”¹è¿›**: æŒ‡å‡ºä¸æ¸…æ™°æˆ–é”™è¯¯çš„åœ°æ–¹

---

**ç‰ˆæœ¬**: v1.0.0  
**ç»´æŠ¤è€…**: DataMasterå›¢é˜Ÿ  
**æ›´æ–°æ—¥æœŸ**: 2025å¹´1æœˆ24æ—¥